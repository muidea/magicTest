# Endpoint 测试用例分类整理

## 1. 基础CURD操作

### 1.1 创建操作
| 用例ID | 测试类型 | 描述 | 输入数据 | 预期结果 |
|--------|----------|------|----------|----------|
| E-TC-001 | 正常 | 创建有效时间端点 | `startTime: 当前时间-1h, expireTime: 当前时间+24h` | 创建成功 |
| E-TC-002 | 正常 | 创建全局作用域端点 | `scope: "*"` | 创建成功 |
| E-TC-003 | 正常 | 创建多命名空间端点 | `scope: "n1,n2,n3"` | 创建成功 |

### 1.2 读取操作
| 用例ID | 测试类型 | 描述 | 输入数据 | 预期结果 |
|--------|----------|------|----------|----------|
| E-TC-012 | 正常 | 查询端点 | 有效端点ID | 返回完整端点信息 |
| E-TC-013 | 正常 | 过滤端点(按路径) | `endpoint: "/api/v1/test"` | 返回匹配端点 |
| E-TC-014 | 正常 | 过滤端点(按状态) | `status: 2` | 返回启用状态的端点 |
| E-TC-015 | 正常 | 过滤端点(按时间范围) | `startTime > X, expireTime < Y` | 返回时间范围内的端点 |

### 1.3 更新操作
| 用例ID | 测试类型 | 描述 | 输入数据 | 预期结果 |
|--------|----------|------|----------|----------|
| E-TC-009 | 正常 | 更新端点时间 | `expireTime: 新时间戳` | 更新成功 |
| E-TC-010 | 正常 | 更新端点作用域 | `scope: "new1,new2"` | 更新成功 |
| E-TC-011 | 正常 | 更新端点状态 | `status: 1 (禁用)` | 状态变更成功 |

### 1.4 删除操作
| 用例ID | 测试类型 | 描述 | 输入数据 | 预期结果 |
|--------|----------|------|----------|----------|
| E-TC-016 | 正常 | 删除端点 | 有效端点ID | 删除成功 |

## 2. 异常测试

### 2.1 创建异常
| 用例ID | 测试类型 | 描述 | 输入数据 | 预期结果 |
|--------|----------|------|----------|----------|
| E-TC-006 | 异常 | 创建时间逻辑错误端点 | `startTime > expireTime` | 创建失败 |
| E-TC-007 | 异常 | 创建关联无效账户的端点 | `account: {id: 999999}` | 创建失败 |
| E-TC-008 | 异常 | 创建关联无效角色的端点 | `role: {id: 999999}` | 创建失败 |

## 3. 边界测试

| 用例ID | 测试类型 | 描述 | 输入数据 | 预期结果 |
|--------|----------|------|----------|----------|
| E-TC-004 | 边界 | 创建时间边界端点 | `startTime = expireTime` | 创建失败或零时长处理 |
| E-TC-005 | 边界 | 创建超长端点路径 | `endpoint: 500字符路径` | 创建成功或适当处理 |

## 4. 功能测试场景

### 场景 E1: 端点时效性验证
- **前置条件**: 当前时间戳
- **测试步骤**:
  1. 创建 `StartTime < 当前时间 < ExpireTime` 的有效端点
  2. 创建已过期的端点 (`ExpireTime < 当前时间`)
  3. 创建未开始的端点 (`StartTime > 当前时间`)
  4. 验证时间逻辑正确性
- **预期结果**: 时间逻辑正确处理，仅有效端点可访问

### 场景 E2: 端点权限关联
- **前置条件**: 有效的 Account 和 Role
- **测试步骤**:
  1. 创建关联 Account 和 Role 的端点
  2. 验证关联对象完整性
  3. 测试更新关联对象
  4. 测试删除关联对象后的端点状态
- **预期结果**: 关联关系正确处理

### 场景 E3: 端点作用域控制
- **前置条件**: 多个命名空间
- **测试步骤**:
  1. 创建全局作用域 (`"*"`) 端点
  2. 创建多命名空间作用域 (`"n1,n2"`) 端点
  3. 创建空作用域 (`""`) 端点
  4. 验证不同作用域的访问权限
- **预期结果**: 作用域逻辑正确实现

## 5. 测试统计

| 测试类型 | 用例数量 | 完成状态 |
|----------|----------|----------|
| 基础CURD | 11 | 待实现 |
| 异常测试 | 3 | 待实现 |
| 边界测试 | 2 | 待实现 |
| 功能场景 | 3 | 待实现 |
| **总计** | **19** | **待实现** |

## 6. 测试优先级

1. **P0 (高优先级)**: E-TC-001, E-TC-002, E-TC-012, E-TC-016 (基础功能)
2. **P1 (中优先级)**: E-TC-003, E-TC-009, E-TC-010, E-TC-011, E-TC-013, E-TC-014 (常用功能)
3. **P2 (低优先级)**: 所有异常和边界测试用例

## 7. 依赖关系

- **依赖Account实体**: E-TC-007 需要有效的Account存在
- **依赖Role实体**: E-TC-008 需要有效的Role存在
- **时间依赖**: 所有时间相关测试需要正确的时间戳处理
- **命名空间依赖**: 场景E3需要多个命名空间环境